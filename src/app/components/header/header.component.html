<header>
    <div class="header__left">
        <span class="header__title">Welcome ! {{ user.email }}</span>
    </div>

    <!-- Searching Bar -->
    <div class="header__middle">
        <div class="form__group form__group--search-bar">
            <input type="text" 
                   class="form__input" 
                   placeholder="Looking for something?" #term (keyup)="searchEvent(term.value)">
            <i class="pi pi-search cursor-pointer" (click)="searchEvent(term.value)" *ngIf="!searchedEvents.length"></i>
            <i class="pi pi-times cursor-pointer" (click)="clearSearch(term)"  *ngIf="searchedEvents.length"></i>
        </div>

    </div>
    <!-- Searching Bar -->


    <div class="header__right">
        <div class="header__user-info cursor-pointer" (click)="op.toggle($event)">
            <span class="header__user-name">{{ user.fullname }}</span>
            <div class="header__user-profile ml-15">
                {{ firstLetter }}
            </div>
            <i class="pi pi-angle-down ml-15"></i>
        </div>
        <i class="pi pi-bell ml-25 cursor-pointer" (click)="opNotifications.toggle($event)"></i>
    </div>
</header>

<!-- Dropdown Options -->
<p-overlayPanel #op class="p-overlaypanel--header" [dismissable]="false">
    <ng-template pTemplate>
        <div class="p-overlaypanel__options">
            <app-profile class="mb-10"></app-profile>
            <a class="mb-10 cursor-pointer">Support</a>
            <app-create-event [headerOverlaypanel]="op"></app-create-event>
            <a class="cursor-pointer mt-12 d-flex items-center logout-option" (click)="showModalDialog()">
                <i class="pi pi-sign-out mr-4"></i>
                Log out
            </a>
        </div>
    </ng-template>
</p-overlayPanel>
<!-- Dropdown Options -->


<!-- Dropdown Notifications -->
<p-overlayPanel #opNotifications class="p-overlaypanel--notifications" [dismissable]="true">
    <ng-template pTemplate>
        <app-notifications></app-notifications>
    </ng-template>
</p-overlayPanel>
<!-- Dropdown -->


<!-- Dialog for log out confirmation -->
<p-dialog class="dialog--small"
          header="Log out" 
          [(visible)]="displayModalLogout" 
          [modal]="true" 
          [style]="{width: '36.5rem'}"
          [baseZIndex]="10000"
          [draggable]="false">

    <p class="p-dialog__sentence p-dialog__sentence--paragraph">
        Are you sure you want to leave the platform? When you log out, your session will be closed and you will be redirected to the login screen.
    </p>

    <div class="p-dialog__btns">
        <button class="btn--clear btn--small" (click)="displayModalLogout=false">Close</button>
        <button type="submit" class="btn btn--small" (click)="logout()">Log Out</button>
    </div>

</p-dialog>
<!-- Dialog for log out confirmation -->

<!-- Searches -->
<div class="searches white-box d-flex flex-column" *ngIf="searchedEvents.length">
    <div class="events d-flex flex-column">
        <span class="mt-10">Results: {{searchedEvents.length}}</span>

        <!-- Event Card -->
        <app-event *ngFor="let event of searchedEvents"
                    [user]="user" 
                    [events]="searchedEvents" 
                    [event]="event"
                    [showAdminOptions]="false"
                    [myParticipationsIDs]="[]"
                    [isEventSearch]="true">
        </app-event>
        <!-- Event Card -->

    </div>
</div>
<!-- Searches -->


<p-toast key="headerToastMessage"></p-toast>
